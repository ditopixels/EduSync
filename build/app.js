"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _express=_interopRequireDefault(require("express")),_expressHandlebars=_interopRequireDefault(require("express-handlebars")),_expressSession=_interopRequireDefault(require("express-session")),_morgan=_interopRequireDefault(require("morgan")),_passport=_interopRequireDefault(require("passport")),_connectFlash=_interopRequireDefault(require("connect-flash")),_path=_interopRequireDefault(require("path")),_config=require("./config.js");require("./helpers/passport.js");var _indexRoutes=_interopRequireDefault(require("./routes/index.routes.js")),_signRoutes=_interopRequireDefault(require("./routes/sign.routes.js")),_dashboardRoutes=_interopRequireDefault(require("./routes/dashboard.routes.js"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}//Routes
/***APP***/var app=(0,_express["default"])();app.set("port",_config.config.PORT),app.use((0,_morgan["default"])("dev")),app.use((0,_expressSession["default"])({secret:"mysecretapp",resave:!0,saveUninitialized:!0})),app.use(_passport["default"].initialize()),app.use(_passport["default"].session()),app.use(_express["default"]["static"](_path["default"].join(__dirname,"public"))),app.set("views",_path["default"].join(__dirname,"views")),app.set("view engine",".hbs"),app.engine(".hbs",(0,_expressHandlebars["default"])({defaultLayout:"main",layoutsDir:_path["default"].join(app.get("views"),"layouts"),partialsDir:_path["default"].join(app.get("views"),"partials"),extname:".hbs",helpers:_config.helpershbs})),app.use(_express["default"].json()),app.use(_express["default"].urlencoded({extended:!0})),app.use((0,_connectFlash["default"])()),app.use(function(a,b,c){b.locals.success_msg=a.flash("success_msg"),b.locals.error_msg=a.flash("error_msg"),b.locals.error=a.flash("error"),b.locals.user=a.user||null,c()}),app.use(_indexRoutes["default"]),app.use(_signRoutes["default"]),app.use(_dashboardRoutes["default"]),app.use("*",function(a,b){b.render("404",{title:"GikEdu - page not found"})});var _default=app;exports["default"]=_default;